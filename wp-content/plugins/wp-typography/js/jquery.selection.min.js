/*! wp-Typography jquery.selection.js 2017-01-03 10:31:07 AM */
!function(a,b,c){var d=function(a){var d,e,f={text:"",start:0,end:0};if(!a.value)return f;try{if(b.getSelection)f.start=a.selectionStart,f.end=a.selectionEnd,f.text=a.value.slice(f.start,f.end);else if(c.selection){a.focus(),d=c.selection.createRange(),e=c.body.createTextRange(),f.text=d.text;try{e.moveToElementText(a),e.setEndPoint("StartToStart",d)}catch(b){e=a.createTextRange(),e.setEndPoint("StartToStart",d)}f.start=a.value.length-e.text.length,f.end=f.start+d.text.length}}catch(a){}return f},e={getPos:function(a){var b=d(a);return{start:b.start,end:b.end}},setPos:function(a,c,d){var e;d=this._caretMode(d),"start"===d?c.end=c.start:"end"===d&&(c.start=c.end),a.focus();try{a.createTextRange?(e=a.createTextRange(),b.navigator.userAgent.toLowerCase().indexOf("msie")>=0&&(c.start=a.value.substr(0,c.start).replace(/\r/g,"").length,c.end=a.value.substr(0,c.end).replace(/\r/g,"").length),e.collapse(!0),e.moveStart("character",c.start),e.moveEnd("character",c.end-c.start),e.select()):a.setSelectionRange&&a.setSelectionRange(c.start,c.end)}catch(a){}},getText:function(a){return d(a).text},_caretMode:function(a){switch(a=a||"keep",!1===a&&(a="end"),a){case"keep":case"start":case"end":break;default:a="keep"}return a},replace:function(b,c,e){var f=d(b),g=b.value,h=a(b).scrollTop(),i={start:f.start,end:f.start+c.length};b.value=g.substr(0,f.start)+c+g.substr(f.end),a(b).scrollTop(h),this.setPos(b,i,e)},insertBefore:function(b,c,e){var f=d(b),g=b.value,h=a(b).scrollTop(),i={start:f.start+c.length,end:f.end+c.length};b.value=g.substr(0,f.start)+c+g.substr(f.start),a(b).scrollTop(h),this.setPos(b,i,e)},insertAfter:function(b,c,e){var f=d(b),g=b.value,h=a(b).scrollTop(),i={start:f.start,end:f.end};b.value=g.substr(0,f.end)+c+g.substr(f.end),a(b).scrollTop(h),this.setPos(b,i,e)}};a.extend({selection:function(d){var e,f,g="text"===(d||"text").toLowerCase();try{if(b.getSelection)return g?b.getSelection().toString():(e=b.getSelection(),e.getRangeAt?f=e.getRangeAt(0):(f=c.createRange(),f.setStart(e.anchorNode,e.anchorOffset),f.setEnd(e.focusNode,e.focusOffset)),a("<div></div>").append(f.cloneContents()).html());if(c.selection)return g?c.selection.createRange().text:c.selection.createRange().htmlText}catch(a){}return""}}),a.fn.extend({selection:function(a,b){switch(b=b||{},a){case"getPos":return e.getPos(this[0]);case"setPos":return this.each(function(){e.setPos(this,b)});case"replace":return this.each(function(){e.replace(this,b.text,b.caret)});case"insert":return this.each(function(){"before"===b.mode?e.insertBefore(this,b.text,b.caret):e.insertAfter(this,b.text,b.caret)});case"get":default:return e.getText(this[0])}return this}})}(jQuery,window,window.document);